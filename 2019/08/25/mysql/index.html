<!DOCTYPE html>
<html lang="en">





<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content>
  <meta name="author" content="陈孝艳">
  <meta name="keywords" content>
  <title>mysql数据库 ~ missyan的博客</title>

  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css">
<link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css">
<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">


  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css">

<link rel="stylesheet" href="/css/main.css">


  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css">


</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>missyan的博客</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">Archives</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">Categories</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">Tags</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">About</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>


</nav>

    <div class="view intro-2" id="background"
         style="background: url('/img/default.png')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              
                <p class="mt-3">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>&nbsp;
                  Sunday, August 25th 2019, 8:49 pm
                </p>
              

              <p>
                
                  
                  &nbsp;<i class="far fa-chart-bar"></i>
                  <span class="post-count">
                    7.6k 字
                  </span>&nbsp;
                

                
                  
                  &nbsp;<i class="far fa-clock"></i>
                  <span class="post-count">
                      31 分钟
                  </span>&nbsp;
                

                
                  <!-- 不蒜子统计文章PV -->
                  
                  &nbsp;<i class="far fa-eye" aria-hidden="true"></i>&nbsp;
                  <span id="busuanzi_container_page_pv">
                    <span id="busuanzi_value_page_pv"></span> 次
                  </span>&nbsp;
                
              </p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto" id="post">
          <div class="markdown-body">
            <p>[TOC]</p>
<p>###MySQL数据库简介</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">MySQL是服务端，提供操作数据的服务</span><br><span class="line">navicat是客户端，提供界面，先连接服务端，操作mysql的数据</span><br><span class="line"></span><br><span class="line">连接服务端:MySQL必须是已经启动状态,需要ip，端口，用户名，密码</span><br><span class="line">    </span><br><span class="line">想在关系型数据库存数据，先有仓库，再有表，再存数据</span><br><span class="line"></span><br><span class="line">设计数据库时的数据类型与约束</span><br><span class="line"></span><br><span class="line">**数据类型**</span><br><span class="line"></span><br><span class="line">- 整数：int，默认有符号（可以存负数），无符号（不能存负数），长度没有意思</span><br><span class="line">- 小数：decimal，（<span class="number">5</span>，<span class="number">3</span>），整数占<span class="number">2</span>位，小数点后占<span class="number">3</span>位</span><br><span class="line">- 字符串：varchar，一个数字或一个字母或一个标点符号或一个中文占一个字符</span><br><span class="line">- 日期时间：datetime，格式：`<span class="number">2019</span><span class="number">-04</span><span class="number">-02</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>`</span><br><span class="line"></span><br><span class="line">**约束**</span><br><span class="line"></span><br><span class="line">- 主键(primary key)：唯一的标识一条数据，如果某个字段设置为主键，这列值==唯一且不能为空==，通常一个表会有一个id字段，设置为主键，通常设置为自动递增（从<span class="number">1</span>开始自动增长），设置为无符号</span><br><span class="line"></span><br><span class="line">  id字段：主键，无符号的int，自动递增</span><br><span class="line"></span><br><span class="line">- 非空：字段不允许为空，==不填写值，显示(null)，是空==，空字符串不是空</span><br><span class="line"></span><br><span class="line">- 惟一(unique)：此字段的值不允许重复，sql语法再讲</span><br><span class="line">- 默认值(default)：当不填写此值时会使用默认值，如果填写时以填写为准，给varchar或datetime字段设置默认值时，必须用英文引号</span><br><span class="line">- 外键(foreign key)：维护两个表之间的关联关系</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">####  查询编辑器</span></span><br><span class="line"></span><br><span class="line">某个仓库--查询—右键点击—新建查询</span><br><span class="line"></span><br><span class="line">- 每一条sql语句结尾需要一个英文分号</span><br><span class="line"></span><br><span class="line">- 注释sql语句：ctrl+/(windows);command+/或者<span class="comment"># (mac)</span></span><br><span class="line"></span><br><span class="line">  取消注释：ctrl+shift+/(windows),command+中/英+/(mac)</span><br></pre></td></tr></table></figure>

<p>###数据库表的操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">**创建表**</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line"></span><br><span class="line">​```sql</span><br><span class="line">create table 表名(</span><br><span class="line">字段名 类型 约束,</span><br><span class="line">字段名 类型 约束,</span><br><span class="line">...</span><br><span class="line">)</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>例：创建学生表，字段要求如下：</p>
<p>姓名(长度为10)， 年龄，身高(保留小数点2位)</p>
<p>要一个主键字段：id，无符号的整数，主键，自动递增</p>
<p>​<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students3(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">unsigned</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">age <span class="built_in">int</span>,</span><br><span class="line">height <span class="built_in">decimal</span>(<span class="number">5</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<p><strong>删除表</strong></p>
<p>语法：</p>
<p>​<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法一：<span class="keyword">drop</span> <span class="keyword">table</span> 表名</span><br><span class="line"></span><br><span class="line">语法二：<span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> 表名</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<p>例：删除学生表</p>
<p>​<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> students;</span><br><span class="line">如果表不存在，会报错</span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> students2;</span><br><span class="line">如果表不存在，不会报错</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<p><strong>数据操作-增删改</strong></p>
<p>###增</p>
<p>####添加一行数据</p>
<p>语法一：所有字段设置值，==值的顺序与表中字段的顺序对应==<br>insert into 表名 values(值1,值2,…)<br>主键列是自动增长，插入时需要占位，通常使用0或者 default 或者 null 来占位</p>
<p>语法二：部分字段设置值，值的顺序与给出的字段顺序对应<br>insert into 表名(字段1,字段2) values(值1,值2,…)</p>
<p>###添加多行数据</p>
<p>语法一：写多条insert语句，语句之间用英文分号隔开</p>
<p>​<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students3 <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'亚瑟5'</span>,<span class="number">12</span>,<span class="number">123.1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students3(<span class="keyword">name</span>) <span class="keyword">values</span>(<span class="string">'鲁班5'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students3(age,<span class="keyword">name</span>) <span class="keyword">values</span>(<span class="number">22</span>,<span class="string">'鲁班5'</span>);</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<p>语法二：写一条insert语句，设置多条数据，数据之间用英文逗号隔开</p>
<p>​<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students3 <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'亚瑟51'</span>,<span class="number">12</span>,<span class="number">123.1</span>),</span><br><span class="line">(<span class="literal">null</span>,<span class="string">'亚瑟52'</span>,<span class="number">12</span>,<span class="number">123.1</span>),(<span class="literal">null</span>,<span class="string">'亚瑟53'</span>,<span class="number">12</span>,<span class="number">123.1</span>);</span><br><span class="line"></span><br><span class="line">**改**</span><br><span class="line"></span><br><span class="line">语法：<span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段=值,字段<span class="number">2</span>=值<span class="number">2</span> <span class="keyword">where</span> 条件</span><br><span class="line"></span><br><span class="line">例：修改<span class="keyword">id</span>为<span class="number">5</span>的学生数据，姓名改为 狄仁杰，年龄改为 <span class="number">20</span></span><br><span class="line"><span class="keyword">update</span> students3 <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'狄仁杰'</span>,age=<span class="number">20</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">5</span>;</span><br><span class="line">注意：如果不写where，会修改所有行的数据</span><br><span class="line"></span><br><span class="line">**删**</span><br><span class="line"></span><br><span class="line">语法一：<span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件</span><br><span class="line"></span><br><span class="line">例：删除<span class="keyword">id</span>为<span class="number">6</span>的学生数据</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> students3 <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">6</span>;</span><br><span class="line">注意：如果不写where，会删除所有行</span><br><span class="line"></span><br><span class="line">语法二：删除表的所有数据，保留表结构</span><br><span class="line"></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名</span><br><span class="line">例：删除学生表的所有数据</span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> students3_copy1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**Truncate和Delete、Drop的区别**</span><br><span class="line"></span><br><span class="line">1、<span class="keyword">Delete</span>删除数据时，即使删除所有数据，其中的自增长字段不会从<span class="number">1</span>开始</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、<span class="keyword">Truncate</span>删除数据时，其中的自增长字段恢复从<span class="number">1</span>开始</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、<span class="keyword">Drop</span>是删除表，所有数据和表结构都删掉</span><br><span class="line"></span><br><span class="line">**总结**</span><br><span class="line"></span><br><span class="line">在速度上，<span class="keyword">drop</span> &gt; <span class="keyword">truncate</span> &gt; <span class="keyword">delete</span></span><br><span class="line"></span><br><span class="line">如果想删除部分数据用<span class="keyword">delete</span>，注意带上<span class="keyword">where</span>子句</span><br><span class="line"></span><br><span class="line">如果想删除表，用<span class="keyword">drop</span></span><br><span class="line"></span><br><span class="line">如果想保留表而将所有数据删除，自增长字段恢复从<span class="number">1</span>开始，用<span class="keyword">truncate</span></span><br></pre></td></tr></table></figure></p>
<p>###查询相关的操作</p>
<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">语法：select * <span class="keyword">from</span> 表名 where 条件（条件是过滤行，格式：字段 符号 值）</span><br><span class="line"></span><br><span class="line">**比较运算符**：字段=值，字段&gt;值,字段&lt;值,字段!=值,字段&lt;&gt;值;</span><br><span class="line"></span><br><span class="line">**逻辑运算符**:</span><br><span class="line"><span class="keyword">and</span>：且，多个条件同时成立</span><br><span class="line"> <span class="keyword">or</span>：或，多个条件成立一个即可</span><br><span class="line"> <span class="keyword">not</span>：非，对某个条件取反</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**模糊查询**</span><br><span class="line">字段 like 值</span><br><span class="line">% 代表任意个字符,_ 代表一个字符</span><br><span class="line"></span><br><span class="line">例<span class="number">1</span>：查询姓孙的学生</span><br><span class="line">select * <span class="keyword">from</span> students where name like <span class="string">'孙%'</span>;</span><br><span class="line"></span><br><span class="line">例<span class="number">2</span>：查询姓孙且名字是一个字的学生</span><br><span class="line">select * <span class="keyword">from</span> students where name like <span class="string">'孙_'</span>; </span><br><span class="line"></span><br><span class="line">**范围查询**---<span class="keyword">in</span> </span><br><span class="line"></span><br><span class="line">例<span class="number">1</span>：查询家乡是北京或上海或广东的学生</span><br><span class="line">select * <span class="keyword">from</span> students where hometown <span class="keyword">in</span>(<span class="string">'北京'</span>,<span class="string">'上海'</span>,<span class="string">'广东'</span>);</span><br><span class="line"></span><br><span class="line"> between 值<span class="number">1</span> <span class="keyword">and</span> 值<span class="number">2</span> ，==值<span class="number">1</span>&lt;=值<span class="number">2</span>==</span><br><span class="line">例<span class="number">2</span>：查询年龄为<span class="number">18</span>至<span class="number">20</span>的学生</span><br><span class="line">select * <span class="keyword">from</span> students where age between <span class="number">18</span> <span class="keyword">and</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**空判断**</span><br><span class="line"></span><br><span class="line">- (null)是空</span><br><span class="line">- <span class="string">''</span>是空字符串</span><br><span class="line">- 字段 <span class="keyword">is</span> null</span><br><span class="line"></span><br><span class="line">例<span class="number">1</span>：查询没有填写身份证的学生</span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> students where card <span class="keyword">is</span> null;</span><br><span class="line"></span><br><span class="line">查询身份证为空字符串的学生</span><br><span class="line">select * <span class="keyword">from</span> students where card=<span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">例<span class="number">2</span>：查询填写了身份证的学生</span><br><span class="line">select * <span class="keyword">from</span> students where <span class="keyword">not</span> card  <span class="keyword">is</span>  null;</span><br></pre></td></tr></table></figure>

<p>####查询字段</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*查询所有字段**</span><br><span class="line">语法：select * <span class="keyword">from</span> 表名</span><br><span class="line"></span><br><span class="line">*查询部分字段**</span><br><span class="line">语法：select 字段名<span class="number">1</span>,字段名<span class="number">2</span> <span class="keyword">from</span> 表名</span><br></pre></td></tr></table></figure>

<h4 id="起别名"><a href="#起别名" class="headerlink" title="起别名"></a>起别名</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>给表起别名，在多表查询中经常使用</span><br><span class="line">语法：select 别名.字段名<span class="number">1</span>,别名.字段名<span class="number">2</span> <span class="keyword">from</span> 表名 <span class="keyword">as</span> 别名</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>给字段起别名</span><br><span class="line">语法：select name <span class="keyword">as</span> 别名,sex <span class="keyword">as</span> 别名,age <span class="keyword">from</span> students;</span><br></pre></td></tr></table></figure>

<p>####去重</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：select distinct 字段 <span class="keyword">from</span> 表名</span><br><span class="line">例：查询所有学生的性别，不显示重复的数据</span><br><span class="line"></span><br><span class="line">select distinct sex <span class="keyword">from</span> students;</span><br><span class="line">注意：什么是重复数据，在显示的结果中，如果一行记录和另一行完全一致，才是重复数据</span><br></pre></td></tr></table></figure>

<h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">select * <span class="keyword">from</span> 表名 order by 字段 asc或desc </span><br><span class="line">- asc从小到大排列，即升序</span><br><span class="line">- desc从大到小排序，即降序</span><br><span class="line"></span><br><span class="line">例<span class="number">1</span>：查询所有学生信息，按年龄从小到大排序</span><br><span class="line">select * <span class="keyword">from</span> students order by age asc;</span><br><span class="line">select * <span class="keyword">from</span> students order by age;</span><br><span class="line">默认是升序</span><br><span class="line"></span><br><span class="line">例<span class="number">2</span>：查询所有学生信息，按年龄从大到小排序，年龄相同时，再按学号从小到大排序</span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> students order by age desc,studentno;</span><br><span class="line">当按照多个字段排序时，先按第一个字段排序，当第一个字段的值相同时，再按第二个字段排序</span><br><span class="line"></span><br><span class="line">默认排序只能排英文和数字，对中文字段排序需要用到convert函数</span><br><span class="line"></span><br><span class="line">​```sql</span><br><span class="line">select * <span class="keyword">from</span> students order by convert(name using gbk);</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 聚合函数</span><br><span class="line"></span><br><span class="line">```PYTHON</span><br><span class="line">为了快速得到统计数据，有5个聚合函数:count，max，min，sum，avg</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例1：查询学生总数</span><br><span class="line">select count(*) from students;</span><br><span class="line">count()，要么写*，要么写一个字段，如果count(字段)，不会统计为null的数据</span><br><span class="line"></span><br><span class="line">例2：查询女生的最大年龄</span><br><span class="line">select max(age) from students where sex=&apos;女&apos;;</span><br><span class="line"></span><br><span class="line">例3：查询1班的最小年龄</span><br><span class="line">select min(age) from students where class=&apos;1班&apos;;</span><br><span class="line"></span><br><span class="line">例4：查询北京学生的年龄总和</span><br><span class="line">select sum(age) from students where hometown=&apos;北京&apos;;</span><br><span class="line"></span><br><span class="line">例5：查询女生的平均年龄</span><br><span class="line">select avg(age) from students where sex=&apos;女&apos;;</span><br><span class="line"></span><br><span class="line">查询所有学生的最大年龄、最小年龄、平均年龄</span><br><span class="line">select max(age),min(age),avg(age) from students;</span><br></pre></td></tr></table></figure>

<h4 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">按照字段分组，此字段相同的数据会被放到一个组中，==目的是对每一组的数据进行统计(聚合函数)==</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line">select 字段,聚合 <span class="keyword">from</span> 表名 group by 字段</span><br><span class="line"></span><br><span class="line">例<span class="number">1</span>：查询各种性别的人数</span><br><span class="line">select sex,count(*) <span class="keyword">from</span> students group by sex;</span><br><span class="line"></span><br><span class="line">注意：按照哪个字段分组，select后面就只能写那个字段再加上聚合函数</span><br></pre></td></tr></table></figure>

<h4 id="分组后的数据筛选"><a href="#分组后的数据筛选" class="headerlink" title="分组后的数据筛选"></a>分组后的数据筛选</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">语法：select 字段,聚合 <span class="keyword">from</span> 表名 group by 字段 having 条件</span><br><span class="line">例<span class="number">1</span>：查询男生总人数</span><br><span class="line"></span><br><span class="line">select count(*) <span class="keyword">from</span> students where sex=<span class="string">'男'</span>;</span><br><span class="line"></span><br><span class="line">select sex,count(*) <span class="keyword">from</span> students group by sex having sex=<span class="string">'男'</span>;</span><br><span class="line"></span><br><span class="line">having是对分组后得到的结果，再进行过滤</span><br><span class="line"></span><br><span class="line">*对比where与having**</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>where是对<span class="keyword">from</span>后面指定的表进行数据筛选，属于对原始数据的筛选</span><br><span class="line"><span class="number">2.</span>having是对group by的结果进行筛选</span><br><span class="line"><span class="number">3.</span>having后面的条件中可以用聚合函数，where后面不可以</span><br></pre></td></tr></table></figure>

<h4 id="获取部分行"><a href="#获取部分行" class="headerlink" title="获取部分行"></a>获取部分行</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：select * <span class="keyword">from</span> 表名 limit 起始位置,个数</span><br><span class="line">注意：起始位置是从<span class="number">0</span>开始</span><br><span class="line">例<span class="number">1</span>：查询前<span class="number">3</span>行学生信息</span><br><span class="line">select * <span class="keyword">from</span> students limit <span class="number">0</span>,<span class="number">3</span>;</span><br><span class="line">select * <span class="keyword">from</span> students limit <span class="number">3</span>;</span><br><span class="line">省略起始位置，起始位置是<span class="number">0</span></span><br></pre></td></tr></table></figure>

<h4 id="SQL语句的书写顺序"><a href="#SQL语句的书写顺序" class="headerlink" title="SQL语句的书写顺序"></a>SQL语句的书写顺序</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select *,字段名 <span class="keyword">as</span> 别名,聚合  ⑥</span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span>  ①</span><br><span class="line">inner|left|right join 表<span class="number">2</span> on 表<span class="number">1.</span>字段=表<span class="number">2.</span>字段  ②</span><br><span class="line">where 条件  ③</span><br><span class="line">group by 字段 having 条件(聚合)  ④</span><br><span class="line">order by 字段 asc 或 desc  ⑤</span><br><span class="line">limit  ⑥</span><br></pre></td></tr></table></figure>

<h4 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法：select * <span class="keyword">from</span> 表名 limit 起始位置,数量</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>已知：每页显示3条数据，求：显示每一页的sql语句<br>查询表的数据的数量<br>select count(*) from students;<br>计算共显示多少页<br>12/3=4页<br>13/3=4+1页</p>
<p>– 第一页<br>select * from students limit 0,3;<br>– 第二页<br>select * from students limit 3,3;<br>– 第三页<br>select * from students limit 6,3;<br>– 第四页<br>select * from students limit 9,3;<br>​<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">#### 连接查询</span><br><span class="line"></span><br><span class="line">```PYTHON</span><br><span class="line">概念：当查询结果的列来源于多张表时，需要将多张表连接成一个大的数据集，再选择合适的列返回</span><br><span class="line"></span><br><span class="line">**内连接**：只把匹配成功的数据连接起来</span><br><span class="line">语法1：select * from 表1 inner join 表2 on 表1.字段=表2.字段；</span><br><span class="line">语法2：select * from 表1,表2 where 表1.字段=表2.字段；</span><br><span class="line"></span><br><span class="line">多表的内连接查询：</span><br><span class="line">select * from 表1 inner join 表2 on 表1.字段=表2.字段</span><br><span class="line">前面连接后得到一个结果</span><br><span class="line">inner join 表3 on 表3.字段=表1.字段</span><br><span class="line">inner join ...</span><br><span class="line">多表连接后的结果中，可能有重名的字段，如果用到了重名的字段，必须加表名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">** 左连接**：查询的结果为两个表匹配到的数据加左表特有的数据</span><br><span class="line">语法：select * from 表1 left join 表2 on 表1.列=表2.列</span><br><span class="line">left join 前面的表是左表,左表在右表中找不到对应的数据用null填充</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**右连接**：查询的结果为两个表匹配到的数据加右表特有的数据</span><br><span class="line">语法：select * from 表1 right join 表2 on 表1.列=表2.列；</span><br><span class="line">right join 后面的表是右表，右表在左表中找不到对应的数据用null填充</span><br><span class="line"></span><br><span class="line">**自关联**：是连接查询的一种应用，对同一个表查询多次，把多次查询的结果连接起来</span><br><span class="line">语法：select * from 表1 inner join 表1 on 表1.字段=表1.字段</span><br><span class="line">例1：查询河南省的所有城市</span><br><span class="line">select * from areas as a1</span><br><span class="line">inner join areas as a2 on a1.aid=a2.pid</span><br><span class="line">where a1.atitle=&apos;河南省&apos;;</span><br><span class="line">注意：自关联必须对表起别名</span><br><span class="line">应用场景：数据之间有上下级关系，用一个表存储</span><br></pre></td></tr></table></figure></p>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">语法：select ...(select ...);</span><br><span class="line"></span><br><span class="line">子查询是辅助主查询的,要么充当条件,要么充当数据源；</span><br><span class="line">子查询是可以独立存在的语句,是一条完整的select语句；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##子查找充当条件</span></span><br><span class="line">例<span class="number">1</span>：查询大于平均年龄的学生</span><br><span class="line"></span><br><span class="line">查平均年龄</span><br><span class="line">select avg(age) <span class="keyword">from</span> students;</span><br><span class="line"><span class="number">21.5833</span></span><br><span class="line">查询大于平均年龄的学生</span><br><span class="line">select * <span class="keyword">from</span> students where age&gt;<span class="number">21.5833</span>;</span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> students where age&gt;(select avg(age) <span class="keyword">from</span> students);</span><br><span class="line"></span><br><span class="line"><span class="comment">##子查询充当数据源：必须给子查询返回的结果且别名</span></span><br><span class="line"></span><br><span class="line">例<span class="number">5</span>：查询数据库和系统测试的课程成绩</span><br><span class="line">先过滤，只要<span class="string">'数据库'</span>,<span class="string">'系统测试'</span></span><br><span class="line">select * <span class="keyword">from</span> </span><br><span class="line">(select * <span class="keyword">from</span> courses where  name <span class="keyword">in</span> (<span class="string">'数据库'</span>,<span class="string">'系统测试'</span>)) <span class="keyword">as</span> temp</span><br><span class="line">inner join scores on temp.courseno=scores.courseno</span><br></pre></td></tr></table></figure>

<h4 id="数据库高级用法"><a href="#数据库高级用法" class="headerlink" title="数据库高级用法"></a>数据库高级用法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#### 1.1 数据库设计</span></span><br><span class="line"></span><br><span class="line">**E-R模型**</span><br><span class="line"> E表示entry，实体：一个数据对象，描述具有相同特征的事物，一个表</span><br><span class="line">R表示relationship，联系：表示一个或多个实体之间的关联关系，关系的类型包括包括一对一、一对多、多对多</span><br><span class="line"></span><br><span class="line">**关系也是一种数据，需要通过一个字段存储在表中**</span><br><span class="line"></span><br><span class="line">一对一：常用的数据不常用数据的编号</span><br><span class="line"></span><br><span class="line">一对多：多的一方记录编号</span><br><span class="line"></span><br><span class="line">多对多：创建中间表记录编号</span><br><span class="line"></span><br><span class="line"><span class="comment">#### 1.2 命令行客户端</span></span><br><span class="line"></span><br><span class="line">- 连接服务端</span><br><span class="line"></span><br><span class="line">方式一：所有程序中--MySQL command line client</span><br><span class="line"></span><br><span class="line">方式二：找到命令行客户端的路径，</span><br><span class="line"></span><br><span class="line">C:\Program Files (x86)\MySQL\MySQL Server <span class="number">5.1</span>\bin\mysql.exe</span><br><span class="line"></span><br><span class="line">`<span class="string">"C:\Program Files (x86)\MySQL\MySQL Server 5.1\bin\mysql.exe"</span> -uroot -p`</span><br><span class="line"></span><br><span class="line">- 操作数据库</span><br><span class="line"><span class="number">1.</span>查看所有数据库:show databases</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>使用数据库:use 仓库名</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>查看当前使用的数据库:select database()</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> 创建数据库:create database 仓库名 charset=utf8</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>删除数据库:drop database 仓库名</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>操作数据表</span><br><span class="line"></span><br><span class="line">  查看当前数据库中所有表:show tables</span><br><span class="line"></span><br><span class="line">  查看表结构:desc 表名</span><br><span class="line"></span><br><span class="line">  查看表的创建语句:show create table 表名</span><br><span class="line"></span><br><span class="line">   如果中文乱码，`set charset gbk;` ;是sql语句的分隔符，遇到;时才会执行前面的语句</span><br><span class="line"></span><br><span class="line">- 备份与恢复</span><br><span class="line"></span><br><span class="line">以管理员身份运行cmd程序</span><br><span class="line"></span><br><span class="line">备份</span><br><span class="line">mysql dump -uroot -p ceshidb12&gt;ceshidb12.sql</span><br><span class="line"></span><br><span class="line">恢复</span><br><span class="line">mysql  -uroot -p  ceshibak&lt;ceshidb12.sql</span><br><span class="line"></span><br><span class="line"><span class="comment">#### 1.3 内置函数</span></span><br><span class="line"></span><br><span class="line">- 字符串函数</span><br><span class="line"></span><br><span class="line">  <span class="number">1.</span>拼接字符串concat</span><br><span class="line"></span><br><span class="line">  select concat(<span class="number">123</span>,<span class="string">'abc'</span>,<span class="number">89</span>);</span><br><span class="line">  </span><br><span class="line">  select name,hometown,concat(name,<span class="string">'的家乡是'</span>,hometown) <span class="keyword">from</span> students;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  - 包含字符个数length</span><br><span class="line"></span><br><span class="line">  select length(<span class="string">'我'</span>);中文长度是<span class="number">3</span></span><br><span class="line">  </span><br><span class="line">  select * <span class="keyword">from</span> students where length(name)=<span class="number">9</span>;</span><br><span class="line"></span><br><span class="line">  - 截取字符串</span><br><span class="line">    - left(str,len)返回字符串str的左端len个字符</span><br><span class="line">    - right(str,len)返回字符串str的右端len个字符</span><br><span class="line">    - substring(str,pos,len)返回字符串str的位置pos起len个字符</span><br><span class="line"></span><br><span class="line"> 	 select left(<span class="string">'abc'</span>,<span class="number">1</span>);</span><br><span class="line">  	select right(<span class="string">'abc'</span>,<span class="number">1</span>);</span><br><span class="line">  	select substring(<span class="string">'abc'</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">  </span><br><span class="line">  	select name,concat(left(name,<span class="number">1</span>),<span class="string">'xx'</span>) <span class="keyword">from</span> students;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  - 去除空格</span><br><span class="line">    ltrim(str)返回删除了左空格的字符串str</span><br><span class="line">    rtrim(str)返回删除了右空格的字符串str</span><br><span class="line"></span><br><span class="line">  select ltrim(<span class="string">'  abc  '</span>);</span><br><span class="line">  select rtrim(<span class="string">'  abc  '</span>);</span><br><span class="line">  select rtrim(ltrim(<span class="string">'  abc  '</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li><p>大小写转换，函数如下<br>lower(str)<br>upper(str)</p>
<p>select lower(‘aBa’);<br>select upper(‘aBa’);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 数学函数</span><br><span class="line"></span><br><span class="line">  - 求四舍五入值round(n,d)，n表示原数，d表示小数位置，默认为0</span><br><span class="line"></span><br><span class="line">  select round(1.56,1);</span><br><span class="line">  </span><br><span class="line">  select round(avg(age)) from students;</span><br><span class="line"></span><br><span class="line">  - 求x的y次幂pow(x,y)</span><br><span class="line"></span><br><span class="line">  select pow(2,4);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  - 获取圆周率PI()</span><br><span class="line"></span><br><span class="line">  select PI();</span><br><span class="line"></span><br><span class="line">  - 随机数</span><br><span class="line">    rand()==，值为0-1.0的浮点数</span><br><span class="line">  随机在一个表中取一条记录</span><br><span class="line">  select * from students order by rand() limit 1;</span><br><span class="line"></span><br><span class="line">- 日期时间函数</span><br><span class="line"></span><br><span class="line">  - 当前日期current_date()</span><br><span class="line">  - select current_time()</span><br><span class="line">  - 当前日期时间now()</span><br><span class="line">  - 日期格式化date_format(date,format)</span><br><span class="line"></span><br><span class="line">  select date_format(&apos;2019-04-28 15:02:28&apos;,&apos;%Y年%m月%d日 %H时%i分%s秒&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 1.4 流程控制</span><br><span class="line"></span><br><span class="line">case语法：</span><br><span class="line">case 值 when 比较值1 then 结果1 when 比较值2 then 结果2 ... else 结果 end</span><br><span class="line"></span><br><span class="line">select name,sex,case sex when &apos;男&apos; then concat(left(name,1),&apos;帅哥&apos;) when &apos;女&apos; then concat(left(name,1),&apos;美女&apos;) else concat(left(name,1),&apos;xx&apos;) end as tmp from students;</span><br><span class="line"></span><br><span class="line">#### 1.5 自定义函数</span><br><span class="line"></span><br><span class="line">语法：create function 函数名称(参数列表) returns 返回类型 begin sql语句 end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例：create function my_trim(str varchar(100)) returns varchar(100) begin return ltrim(rtrim(str));</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">使用：select my_trim(&apos;  abc  &apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">delimiter的作用是把命令行中默认的分隔符;改成其他的符号</span><br><span class="line"></span><br><span class="line">#### 1.6 存储过程</span><br><span class="line"></span><br><span class="line">语法：create procedure 存储过程名称(参数列表) begin sql语句 end</span><br><span class="line">例：create procedure proc_stu() begin select * from students;end</span><br><span class="line"></span><br><span class="line">使用：call proc_stu;</span><br><span class="line"></span><br><span class="line">- 存储过程和函数都是为了可重复的执行操作数据库的 sql 语句的集合.</span><br><span class="line">- 存储过程和函数都是一次编译,就会被缓存起来,下次使用就直接命中缓存中已经编译好的 sql, 不需要重复编译</span><br><span class="line">- 减少网络交互,减少网络访问流量</span><br><span class="line"></span><br><span class="line">#### 1.7 ==视图==</span><br><span class="line"></span><br><span class="line">语法：create view 视图名 as select...</span><br><span class="line"></span><br><span class="line">例：create view v_sss as select stu.*,cs.courseNo,cs.name courseName,sc.score</span><br><span class="line">from students stu</span><br><span class="line">inner join scores sc on stu.studentNo = sc.studentnum</span><br><span class="line">inner join courses cs on cs.courseNo = sc.courseNo;</span><br><span class="line"></span><br><span class="line">注意：创建视图时，select语句返回的结果不能有重复的字段</span><br><span class="line"></span><br><span class="line">使用：select * from v_sss;</span><br><span class="line">作用：视图的用途就是查询，存在于服务端，可以重复使用，节省流量</span><br><span class="line"></span><br><span class="line">- 查看视图：查看表会将所有的视图也列出来</span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">- 删除视图</span><br><span class="line">drop view 名称</span><br><span class="line"></span><br><span class="line">#### 1.8 事务</span><br><span class="line"></span><br><span class="line">所谓事务,它是一个操作序列，这些操作要么都执行，要么都不执行</span><br><span class="line"></span><br><span class="line">- 全部成功</span><br><span class="line"></span><br><span class="line">1、开启事务：begin</span><br><span class="line"></span><br><span class="line">2、多个操作都成功</span><br><span class="line"></span><br><span class="line">大乔给小乔转5岁</span><br><span class="line">update students set age=age-5 where name=&apos;大乔&apos;;</span><br><span class="line"></span><br><span class="line">update students set age=age+5 where name=&apos;小乔&apos;;</span><br><span class="line"></span><br><span class="line">3、提交事务：commit</span><br><span class="line"></span><br><span class="line">- 全部失败</span><br><span class="line"></span><br><span class="line">1、开启事务：begin</span><br><span class="line"></span><br><span class="line">2、多个操作有一个失败</span><br><span class="line"></span><br><span class="line">大乔给小乔转5岁</span><br><span class="line">update students set age=age-5 where name=&apos;大乔&apos;;</span><br><span class="line"></span><br><span class="line">update students set age=age+5 where nama=&apos;小乔&apos;;</span><br><span class="line"></span><br><span class="line">3、回滚：rollback</span><br><span class="line"></span><br><span class="line">#### 1.9 索引</span><br><span class="line"></span><br><span class="line">提升查询的速度，降低更新表的速度</span><br><span class="line"></span><br><span class="line">1.查看索引：show index from 表名</span><br><span class="line">2.创建索引</span><br><span class="line"> 方式一：建表时创建索引</span><br><span class="line">	create table create_index2(id int primary key,-- 如果字段是主键或唯一，会自动创建索引</span><br><span class="line">	name varchar(10) unique,-- 唯一约束</span><br><span class="line">	age int,</span><br><span class="line">	key (age) -- 创建索引）；</span><br><span class="line"></span><br><span class="line">索引作用在某一列数据，如果name字段有索引，下面的语言效果高</span><br><span class="line"></span><br><span class="line">select * from student where name=&apos;&apos;</span><br><span class="line"></span><br><span class="line">  方式二：对于已经存在的表，添加索引</span><br><span class="line">create index 索引名称 on 表名(字段名称(长度))</span><br><span class="line">create index name_i on create_index(name(10));</span><br><span class="line">create index age_i on create_index(age);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3.删除索引：</span><br><span class="line"></span><br><span class="line">drop index 索引名称 on 表名</span><br><span class="line"></span><br><span class="line">#### 1.10 外键</span><br><span class="line"></span><br><span class="line">一个表a的字段aa，被另一个b的bb字段约束</span><br><span class="line"></span><br><span class="line">语法</span><br><span class="line"></span><br><span class="line">方式一：创建数据表的时候设置外键约束</span><br><span class="line">foreign key(自己的字段) references 主表(主表字段)</span><br><span class="line"></span><br><span class="line">例：create table class(id int unsigned primary key auto_increment,name varchar(10));</span><br><span class="line"></span><br><span class="line">create table stu(name varchar(10),class_id int unsigned,foreign key(class_id) references class(id));</span><br><span class="line"></span><br><span class="line">方式二：对于已经存在的数据表设置外键约束</span><br><span class="line"></span><br><span class="line">alter table 从表名 add foreign key (从表字段) references 主表名(主表字段);</span><br><span class="line"></span><br><span class="line">例：alter table stu add foreign key(class_id) references class(id);</span><br><span class="line"></span><br><span class="line">查看外键：show create table 表名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">CREATE TABLE `stu` (</span><br><span class="line">  `name` varchar(10) DEFAULT NULL,</span><br><span class="line">  `class_id` int(10) unsigned DEFAULT NULL,</span><br><span class="line">  KEY `class_id` (`class_id`),</span><br><span class="line">  CONSTRAINT `stu_ibfk_1` FOREIGN KEY (`class_id`) REFERENCES `class` (`id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>删除外键：alter table 表名 drop<br>foreign key 外键名称;</p>
<p>外键的缺点：降低表更新的效率</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 重置MYSQL密码</span><br><span class="line"></span><br><span class="line">```PYTHON</span><br><span class="line">**修改密码**</span><br><span class="line">1、连接上mysql，操作mysql仓库</span><br><span class="line"></span><br><span class="line">2、修改密码，密码存在user表中</span><br><span class="line">update user set password=password(&apos;321&apos;);</span><br><span class="line"></span><br><span class="line">加密是不可逆</span><br><span class="line"></span><br><span class="line">3、刷新权限，让密码生效</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">8.0版本直接运行下面命令</span><br><span class="line">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED WITH mysql_native_password BY &apos;你的新密码&apos;</span><br><span class="line"></span><br><span class="line">**忘记 root 账户密码怎么办**</span><br><span class="line"></span><br><span class="line">重置密码</span><br><span class="line">1、找到配置文件</span><br><span class="line">C:\Program Files (x86)\MySQL\MySQL Server 5.1\my.ini</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">skip-grant-tables</span><br><span class="line"></span><br><span class="line">重启mysql服务</span><br><span class="line"></span><br><span class="line">2、按照前面的内容设置一个新密码</span><br><span class="line"></span><br><span class="line">3、还原配置文件，重启mysql服务</span><br><span class="line"></span><br><span class="line">8.0配置文件路径</span><br><span class="line">C:\ProgramData\MySQL Server 8.0</span><br><span class="line"></span><br><span class="line">**操作日志**</span><br><span class="line">1、查询日志功能是否启用</span><br><span class="line">show variables like &apos;general%&apos;;</span><br><span class="line"></span><br><span class="line">2、启用日志</span><br><span class="line">set global general_log=1;</span><br><span class="line"></span><br><span class="line">3、操作数据库，日志文件会发生变化</span><br><span class="line"></span><br><span class="line">4、关闭日志</span><br><span class="line">set global general_log=0;</span><br><span class="line"></span><br><span class="line">#### 1.1 NoSQL</span><br><span class="line"></span><br><span class="line">非关系型数据库的统称</span><br><span class="line"></span><br><span class="line">- 不用sql语言</span><br><span class="line">- 不用表存储数据</span><br><span class="line">- 性能高</span><br><span class="line"></span><br><span class="line">#### 1.2 Redis</span><br><span class="line"></span><br><span class="line">- key-value存数据</span><br><span class="line">- 性能高</span><br><span class="line">&gt;启动redis时，加载硬盘的数据到内存，</span><br><span class="line">&gt;定时把内存中的新数据保存到硬盘</span><br><span class="line"></span><br><span class="line">## 2. 服务端与客户端</span><br><span class="line"></span><br><span class="line">- 服务端操作</span><br><span class="line"></span><br><span class="line">  - 启动:redis-server</span><br><span class="line"></span><br><span class="line">  - 停止:ctrl+c</span><br><span class="line"></span><br><span class="line">  - 如果把启动redis的窗口关闭:ps -aux | grep &apos;redis&apos;;kill 3892</span><br><span class="line"></span><br><span class="line">- 客户端操作</span><br><span class="line"></span><br><span class="line">  - 连接服务端</span><br><span class="line">	redis-cli</span><br><span class="line">	redis-cli --raw(如果中文乱码用)</span><br><span class="line"></span><br><span class="line">  - 停止:ctrl+c</span><br><span class="line"></span><br><span class="line">  - 切换数据库</span><br><span class="line"></span><br><span class="line">  不能创建仓库，默认有16个仓库，通过0-15来标识</span><br><span class="line"></span><br><span class="line">  select 数字 刚连接上服务端时，进入的是0仓库</span><br><span class="line"></span><br><span class="line">## 3. key-value</span><br><span class="line"></span><br><span class="line">键值对</span><br><span class="line"></span><br><span class="line">键的名称唯一，不能重复，用字母数字和下划线</span><br><span class="line"></span><br><span class="line">值的类型有5种，string，hash，list，set，zset</span><br><span class="line"></span><br><span class="line">## 4. string</span><br><span class="line"></span><br><span class="line">字符串</span><br><span class="line"></span><br><span class="line">- string是redis最基本的类型</span><br><span class="line">- 最大能存储512MB数据</span><br><span class="line">- string类型是二进制安全的，可以存储任何数据，比如数字、图片等</span><br><span class="line"></span><br><span class="line">**增加、修改**</span><br><span class="line"></span><br><span class="line">- 设置键值</span><br><span class="line">- 如果设置的键不存在则为添加，如果设置的键已经存在则修改</span><br><span class="line"></span><br><span class="line">语法：`set key value`</span><br><span class="line"></span><br><span class="line">例1：设置键为&apos;user1&apos;值为&apos;wzj&apos;的数据</span><br><span class="line"></span><br><span class="line">`set user1 wzj`</span><br><span class="line"></span><br><span class="line">- 设置键值及过期时间，以秒为单位</span><br><span class="line"></span><br><span class="line">语法：`setex key 秒 value`</span><br><span class="line"></span><br><span class="line">例2：设置键为&apos;user2&apos;值为&apos;lb&apos;过期时间为8秒的数据</span><br><span class="line"></span><br><span class="line">`setex user2 8 lb`</span><br><span class="line"></span><br><span class="line">- 设置多个键值</span><br><span class="line"></span><br><span class="line">语法 ：`mset key1 value1 key2 value2 ...`</span><br><span class="line"></span><br><span class="line">例3：设置键为&apos;user4&apos;值为&apos;xq&apos;、键为&apos;user5&apos;值为&apos;dq&apos;、键为&apos;user6&apos;值为&apos;zgl&apos;、键为&apos;user7&apos;值为&apos;bq&apos;的数据</span><br><span class="line"></span><br><span class="line">`mset user4 xq user5 dq user6 zgl user7 bq`</span><br><span class="line"></span><br><span class="line">- 追加值，如果键不存在，新建一个键值对</span><br><span class="line"></span><br><span class="line">语法：`append key value`</span><br><span class="line"></span><br><span class="line">例4：向键为user1中追加值&apos; haha&apos;</span><br><span class="line"></span><br><span class="line">`append user1 haha`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**获取**</span><br><span class="line"></span><br><span class="line">- 获取：根据键获取值，如果不存在此键则返回nil</span><br><span class="line"></span><br><span class="line">语法：`get key`</span><br><span class="line"></span><br><span class="line">例5：获取键&apos;user1&apos;的值</span><br><span class="line"></span><br><span class="line">` get user1000`</span><br><span class="line"></span><br><span class="line">- 根据多个键获取多个值</span><br><span class="line"></span><br><span class="line">语法：`mget key1 key2 ...`</span><br><span class="line"></span><br><span class="line">例6：获取键&apos;user3&apos;、&apos;user4&apos;、&apos;user5&apos;、&apos;user6&apos;的值</span><br><span class="line"></span><br><span class="line">`mget user3 user4 user5 user6`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">string没有删除命令</span><br><span class="line"></span><br><span class="line">## 5. 键命令</span><br><span class="line"></span><br><span class="line">- ==查找键==，参数支持正则表达式</span><br><span class="line"></span><br><span class="line">语法：`keys 表达式`</span><br><span class="line"></span><br><span class="line">例1：查看所有键</span><br><span class="line"></span><br><span class="line">`keys *`</span><br><span class="line"></span><br><span class="line">例2：查看名称中包含a的键</span><br><span class="line"></span><br><span class="line">`keys *a*`</span><br><span class="line"></span><br><span class="line">*任意个字符，?一个字符</span><br><span class="line"></span><br><span class="line">- 判断键是否存在，如果存在返回1，不存在返回0</span><br><span class="line"></span><br><span class="line">语法：`exists key1 key2 ...`</span><br><span class="line"></span><br><span class="line">例3：判断键&apos;user1&apos;、&apos;user2&apos;是否存在</span><br><span class="line"></span><br><span class="line">`exists user1 user2`</span><br><span class="line"></span><br><span class="line">- 查看键对应的value的类型</span><br><span class="line"></span><br><span class="line">语法：`type key`</span><br><span class="line"></span><br><span class="line">例4：查看键&apos;user1&apos;的值类型，为redis支持的五种类型中的一种</span><br><span class="line"></span><br><span class="line">`type user1`</span><br><span class="line"></span><br><span class="line">- ==删除键==及对应的值</span><br><span class="line"></span><br><span class="line">语法：`del key1 key2...`</span><br><span class="line"></span><br><span class="line">例5：删除键&apos;user3&apos;、&apos;user4&apos;、&apos;user5&apos;、&apos;user6&apos;</span><br><span class="line"></span><br><span class="line">`del user3 user4 user5 user6`</span><br><span class="line"></span><br><span class="line">- 设置过期时间，以秒为单位</span><br><span class="line"></span><br><span class="line">语法：`expire key 秒`</span><br><span class="line"></span><br><span class="line">例6：设置键&apos;user1&apos;的过期时间为10秒</span><br><span class="line"></span><br><span class="line">`expire user1 10`</span><br><span class="line"></span><br><span class="line">- 查看有效时间，以秒为单位</span><br><span class="line"></span><br><span class="line">语法：`ttl key`</span><br><span class="line"></span><br><span class="line">例7：查看键&apos;user7&apos;的有效时间</span><br><span class="line"></span><br><span class="line">`tll user7`</span><br><span class="line"></span><br><span class="line">-1代表永不过期 ，-2代表过期或不存在</span><br><span class="line"></span><br><span class="line">## 6. hash</span><br><span class="line"></span><br><span class="line">哈希</span><br><span class="line"></span><br><span class="line">- hash用于存储键值对集合</span><br><span class="line">- 值的类型为string</span><br><span class="line">- 键可以理解为属性，一个属性对应一个值</span><br><span class="line"></span><br><span class="line">**增加、修改**</span><br><span class="line"></span><br><span class="line">- 设置单个属性</span><br><span class="line"></span><br><span class="line">语法：`hset key 属性 值 `</span><br><span class="line"></span><br><span class="line">例1：设置键&apos;huser1&apos;的属性&apos;name&apos;为&apos;lb&apos;</span><br><span class="line"></span><br><span class="line">`hset huser1 name lb`</span><br><span class="line"></span><br><span class="line">- 设置多个属性</span><br><span class="line"></span><br><span class="line">语法：`hmset key 属性 值 属性2 值2`</span><br><span class="line"></span><br><span class="line">例2：设置键&apos;huser2&apos;的属性&apos;name&apos;为&apos;wzj&apos;、属性&apos;gender&apos;为&apos;nv&apos;、属性&apos;birthday&apos;为&apos;2017-1-1&apos;</span><br><span class="line"></span><br><span class="line">`hmset huser2 name wzj gender nv birthday 2017-1-1`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**获取**</span><br><span class="line"></span><br><span class="line">- 获取指定键所有的属性</span><br><span class="line"></span><br><span class="line">语法：`hkeys key`</span><br><span class="line"></span><br><span class="line">例3：获取键&apos;huser2&apos;的所有属性</span><br><span class="line"></span><br><span class="line">`hkeys huser2`</span><br><span class="line"></span><br><span class="line">- 获取一个属性的值</span><br><span class="line"></span><br><span class="line">语法：`hget key 属性 `</span><br><span class="line"></span><br><span class="line">例4：获取键&apos;huser2&apos;属性&apos;name&apos;的值</span><br><span class="line"></span><br><span class="line">`hget huser2 name`</span><br><span class="line"></span><br><span class="line">- 获取多个属性的值</span><br><span class="line"></span><br><span class="line">语法：`hmget key属性 属性2 `</span><br><span class="line"></span><br><span class="line">例5：获取键&apos;huser2&apos;属性&apos;name&apos;、&apos;gender&apos;、&apos;birthday&apos;的值</span><br><span class="line"></span><br><span class="line">`hmget huser2 name gender birthday`</span><br><span class="line"></span><br><span class="line">- 获取所有属性的值</span><br><span class="line"></span><br><span class="line">语法：`hvals key`</span><br><span class="line"></span><br><span class="line">例6：获取键&apos;huser2&apos;所有属性的值</span><br><span class="line"></span><br><span class="line">`hvals huser2`</span><br><span class="line"></span><br><span class="line">例7：获取键&apos;huser2&apos;所有属性和所有值</span><br><span class="line"></span><br><span class="line">`hgetall huser2`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**删除**</span><br><span class="line"></span><br><span class="line">- 删除属性，属性对应的值会被一起删除</span><br><span class="line"></span><br><span class="line">语法：`hdel key 属性1 属性2`</span><br><span class="line"></span><br><span class="line">- 例8：删除键&apos;huser2&apos;的属性&apos;gender&apos;,name</span><br><span class="line"></span><br><span class="line">`hdel huser2 gender name`</span><br><span class="line"></span><br><span class="line">如果所有属性都被删除，整个键值对被删除</span><br><span class="line"></span><br><span class="line">## 7. list</span><br><span class="line"></span><br><span class="line">链表</span><br><span class="line"></span><br><span class="line">- 链表中存的数据类型为string</span><br><span class="line">- 按照添加的顺序排序，从左往右的顺序</span><br><span class="line">- list是双向链表</span><br><span class="line"></span><br><span class="line">**增加**</span><br><span class="line"></span><br><span class="line">- 在左侧插入数据</span><br><span class="line"></span><br><span class="line">语法：`lpush key 值1 值2`</span><br><span class="line"></span><br><span class="line">例1：从键为&apos;luser1&apos;的列表左侧加入数据&apos;dq&apos;、&apos;xq&apos;</span><br><span class="line"></span><br><span class="line">`lpush luser1  dq xq`</span><br><span class="line"></span><br><span class="line">- 在右侧插入数据</span><br><span class="line"></span><br><span class="line">语法：`rpush key 值1 值2`</span><br><span class="line"></span><br><span class="line">例2：从键为&apos;luser1&apos;的列表右侧加入数据&apos;lb&apos;、&apos;zf&apos;</span><br><span class="line"></span><br><span class="line">`rpush  luser1  lb zf`</span><br><span class="line"></span><br><span class="line">- 在指定元素的前或后插入新元素</span><br><span class="line"></span><br><span class="line">语法：`linsert key before或after 现有值 新值`</span><br><span class="line"></span><br><span class="line">例3：在键为&apos;luser1&apos;的列表中元素&apos;lb&apos;前加入&apos;wzj&apos;</span><br><span class="line"></span><br><span class="line">`linsert luser1 before lb wzj`</span><br><span class="line"></span><br><span class="line">**获取**</span><br><span class="line"></span><br><span class="line">- 返回列表里指定范围内的元素</span><br><span class="line">  - start、stop为元素的下标索引</span><br><span class="line">  - 索引从左侧开始，第一个元素为0</span><br><span class="line">  - 索引可以是负数，表示从尾部开始计数，如-1表示最后一个元素</span><br><span class="line"></span><br><span class="line">语法：`lrange key start stop`</span><br><span class="line"></span><br><span class="line">例4：获取键为&apos;luser1&apos;的列表所有元素</span><br><span class="line"></span><br><span class="line">`lrange luser1 0 -1`</span><br><span class="line"></span><br><span class="line">**修改**</span><br><span class="line"></span><br><span class="line">- 设置指定索引位置的元素值</span><br><span class="line">  - 索引从左侧开始，第一个元素为0</span><br><span class="line">  - 索引可以是负数，表示尾部开始计数，如-1表示最后一个元素</span><br><span class="line"></span><br><span class="line">语法：`lset key 位置 新值`</span><br><span class="line"></span><br><span class="line">例5：修改键为&apos;luser1&apos;的列表中下标为1的元素值为&apos;kai&apos;</span><br><span class="line"></span><br><span class="line">`lset luser1 1 kai`</span><br><span class="line"></span><br><span class="line">**删除**</span><br><span class="line"></span><br><span class="line">- 删除指定元素</span><br><span class="line">  - 将列表中前count次出现的值为value的元素移除</span><br><span class="line">  - count &gt;0: 从头往尾移除</span><br><span class="line">  - count &lt;0: 从尾往头移除</span><br><span class="line">  - count = 0: 移除所有</span><br><span class="line"></span><br><span class="line">语法：`lrem key count value`</span><br><span class="line"></span><br><span class="line">例6.2：从&apos;luser2&apos;列表右侧开始删除2个&apos;h0&apos;</span><br><span class="line"></span><br><span class="line">`lrem luser2 0 h0`</span><br><span class="line"></span><br><span class="line">## 8. set</span><br><span class="line"></span><br><span class="line">==无序==集合</span><br><span class="line"></span><br><span class="line">- 元素为string类型</span><br><span class="line">- 元素具有==唯一==性，不重复</span><br><span class="line">- 说明：对于集合没有修改操作</span><br><span class="line"></span><br><span class="line">**增加**</span><br><span class="line"></span><br><span class="line">- 添加元素</span><br><span class="line"></span><br><span class="line">语法：`sadd key 值1 值2`</span><br><span class="line"></span><br><span class="line">例1：向键&apos;suser1&apos;的集合中添加元素&apos;dq&apos;、&apos;xq&apos;、&apos;lb&apos;</span><br><span class="line"></span><br><span class="line">`sadd suser1 dq xq lb`</span><br><span class="line"></span><br><span class="line">**获取**</span><br><span class="line"></span><br><span class="line">- 返回所有的元素</span><br><span class="line"></span><br><span class="line">语法：`smembers key`</span><br><span class="line"></span><br><span class="line">例2：获取键&apos;suser1&apos;的集合中所有元素</span><br><span class="line"></span><br><span class="line">`smembers &apos;suser1&apos;`</span><br><span class="line"></span><br><span class="line">**删除**</span><br><span class="line"></span><br><span class="line">- 删除指定元素</span><br><span class="line"></span><br><span class="line">语法：`srem key 值`</span><br><span class="line"></span><br><span class="line">例3：删除键&apos;suser1&apos;的集合中元素&apos;xq&apos;</span><br><span class="line"></span><br><span class="line">`srem suser1 xq`</span><br><span class="line"></span><br><span class="line">## 9. zset</span><br><span class="line"></span><br><span class="line">==有序==集合</span><br><span class="line"></span><br><span class="line">- 元素为string类型</span><br><span class="line">- 元素具有==唯一==性，不重复</span><br><span class="line">- 每个元素都会关联一个分数，分数可以为负数，通过分数将元素从小到大排序</span><br><span class="line">- 说明：没有修改操作</span><br><span class="line"></span><br><span class="line">**增加**</span><br><span class="line"></span><br><span class="line">- 添加</span><br><span class="line"></span><br><span class="line">语法：`zadd key 分1 值1 分2 值2`</span><br><span class="line"></span><br><span class="line">例1：向键&apos;zuser1&apos;的集合中添加元素&apos;dq&apos;、&apos;xq&apos;、&apos;lb&apos;、&apos;bq&apos;，分数分别为1、5、8、3</span><br><span class="line"></span><br><span class="line">`add zuser1 1 dq 5 xq 8 lb 3 bq`</span><br><span class="line"></span><br><span class="line">如果值存在，可以修改那个值的分数</span><br><span class="line"></span><br><span class="line">**获取**</span><br><span class="line"></span><br><span class="line">- 返回指定范围内的元素</span><br><span class="line">  - start、stop为元素的下标索引</span><br><span class="line">  - 索引从左侧开始，第一个元素为0</span><br><span class="line">  - 索引可以是负数，表示从尾部开始计数，如-1表示最后一个元素</span><br><span class="line"></span><br><span class="line">语法：`zrange key start stop`</span><br><span class="line"></span><br><span class="line">例2：获取键&apos;zuser1&apos;的集合中所有元素</span><br><span class="line"></span><br><span class="line">`zrange &apos;zuser1&apos; 0 -1`</span><br><span class="line"></span><br><span class="line">- 返回score值在min和max之间的元素</span><br><span class="line"></span><br><span class="line">语法：`zrangebyscore key 低分 高分`</span><br><span class="line"></span><br><span class="line">例3：获取键&apos;zuser1&apos;的集合中分数在4和9之间的元素</span><br><span class="line"></span><br><span class="line">`zrangebyscore zuser1 4 9`</span><br><span class="line"></span><br><span class="line">- 返回成员member的score值</span><br><span class="line"></span><br><span class="line">语法：`zscore key 值`</span><br><span class="line"></span><br><span class="line">例4：获取键&apos;zuser1&apos;的集合中元素&apos;lb&apos;的分数</span><br><span class="line"></span><br><span class="line">`zscore zuser1 lb`</span><br><span class="line"></span><br><span class="line">**删除**</span><br><span class="line"></span><br><span class="line">- 删除指定元素</span><br><span class="line"></span><br><span class="line">语法：`zrem key 值1 值2`</span><br><span class="line"></span><br><span class="line">例5：删除集合&apos;zuser1&apos;中元素&apos;dq&apos;</span><br><span class="line"></span><br><span class="line">`zrem zuser1 dq`</span><br><span class="line"></span><br><span class="line">- 删除分数在指定范围的元素</span><br><span class="line"></span><br><span class="line">语法：`zremrangebyscore key 低分 高分`</span><br><span class="line"></span><br><span class="line">例6：删除集合&apos;zuser1&apos;中分数在4、9之间的元素</span><br><span class="line"></span><br><span class="line">`remrangebyscore zuser1 4 9`</span><br></pre></td></tr></table></figure>

<h1 id="mysql忘记密码解决方法"><a href="#mysql忘记密码解决方法" class="headerlink" title="mysql忘记密码解决方法"></a><a href="https://junconec.github.io/2019/07/23/mysql/" target="_blank" rel="noopener">mysql忘记密码解决方法</a></h1><p>mysql 解决忘记密码问题</p>
<p>mac下mysql 1045 (28000): Access denied for user ‘root’@’localhost’ (using password:</p>
<p>新入了mac pro，安装好mysql后，用终端进入mysql遇到个问题： 1045 (28000): Access denied for user ‘root’@’localhost’ (using password: N</p>
<p>讲道理，我还设密码呢，但是第一次进来就报错，goo了一下大概原因可能是mysql创建的时候给自动分配了密码。</p>
<p>不管分配没分配密码，反正一般的解决方法就是：先跳过验证，再重设密码。</p>
<p>具体步骤：</p>
<ol>
<li><p>先关闭MySQL服务；<br>执行</p>
<p>sudo /usr/local/mysql/support-files/mysql.server stop</p>
</li>
</ol>
<p>或者在系统偏好设置中关闭MySQL服务(如果电脑有设置密码的，此处会要求输入计算机密码)</p>
<p>2.去mysql文件夹里设置跳过验证（3步）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">先进入mysql文件夹：</span><br><span class="line">cd /usr/local/mysql/bin/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">设置权限，如果电脑有设置密码（开机和解锁计算机时要求输入的那个密码），在输入此句后会要求输入密码。输入密码后按回车确认</span><br><span class="line">sudo su</span><br><span class="line"></span><br><span class="line">跳过验证</span><br><span class="line">./mysqld_safe --skip-grant-tables &amp;</span><br></pre></td></tr></table></figure>

<p>3.开始设置我们自己的新密码</p>
<p>打开一个新的终端，输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/mysql/bin/mysql -u root -p</span><br></pre></td></tr></table></figure>

<p>然后会要求输入密码，因为此时根本没有密码，所以直接点确认，显示以下信息表示成功进入mysql(与windows系统一样)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 20</span><br><span class="line">Server version: 5.7.11</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure>

<p>现在设置新密码，注意要打引号：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE mysql.user SET authentication_string=PASSWORD(&apos;cc77&apos;) where User=&apos;root&apos;;</span><br></pre></td></tr></table></figure>

<p>回车确认，显示以下信息表示修改密码成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 1</span><br></pre></td></tr></table></figure>

<p>然后刷新一下，让上述修改生效：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<p>刷新成功会显示以下信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure>

<p>4.重启mysql,用新密码登录，可以登录成功了。但是进行其他mysql操作，会显示：</p>
<p>ERROR 1820 (HY000) :You must reset your password using AlTER USER statement before executing this statement.</p>
<p>意思是还要再重设一遍密码，直接输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET PASSWORD = PASSWORD(&apos;cc77&apos;);</span><br></pre></td></tr></table></figure>

<p>修改成功后，终端会显示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 0 rows affected, 1 warning (0.01 sec)</span><br></pre></td></tr></table></figure>

<p>至此，修改密码彻底完成，可以做任何相关sql操作了</p>

            <hr>
          </div>
          <br>
          <div>
            <p>
            
              <span>
                <i class="iconfont icon-inbox"></i>
                
                  <a class="hover-with-bg" href="/categories/mysql">mysql</a>
                  &nbsp;
                
              </span>&nbsp;&nbsp;
            
            
              <span>
                <i class="iconfont icon-tag"></i>
                
                  <a class="hover-with-bg" href="/tags/mysql">mysql</a>
                
                  <a class="hover-with-bg" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5">数据库的增删改查</a>
                
                  <a class="hover-with-bg" href="/tags/%E5%AD%90%E6%9F%A5%E8%AF%A2">子查询</a>
                
                  <a class="hover-with-bg" href="/tags/%E5%B7%A6%E8%BF%9E%E6%8E%A5">左连接</a>
                
                  <a class="hover-with-bg" href="/tags/%E5%8F%B3%E8%BF%9E%E6%8E%A5">右连接</a>
                
                  <a class="hover-with-bg" href="/tags/%E5%86%85%E8%BF%9E%E6%8E%A5">内连接</a>
                
              </span>
            
            </p>
            
              <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" rel="nofollow noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;TOC</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
  </div>
</div>

    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>

    
  
    <!-- 不蒜子统计PV -->
    
    &nbsp;<span id="busuanzi_container_site_pv">总访问量 
          <span id="busuanzi_value_site_pv"></span> 次</span>&nbsp;
  
  
    <!-- 不蒜子统计UV -->
    
    &nbsp;<span id="busuanzi_container_site_uv">总访客数 
            <span id="busuanzi_value_site_uv"></span> 人</span>&nbsp;
  
  <br>



    

  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>


  <script src="/js/lazyload.js" ></script>



  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>



  <script src="/lib/smooth-scroll/smooth-scroll.min.js" ></script>



  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


<!-- Plugins -->


  

  

  

  

  




  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  linenums');
      prettyPrint();
    })
  </script>



  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "mysql数据库&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "false",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script src="/lib/fancybox/jquery.fancybox.min.js" ></script>
  <script>
    $("#post img:not(.no-zoom img, img[no-zoom])").each(
      function () {
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "images");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      }
    );
  </script>







</body>
</html>
